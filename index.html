<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<br>
	<title>Compras</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="shortcut icon" href="carro.png">
</head>

<style>
  	
body{

	background-color: #080B4D



}
table {
  background-color: white;
}


  </style>



<script>




	function cargar(orden,filtro) {
		var producto={
		"products": [
		    {
		      "id": 1,
		      "name": "lorem",
		      "price": "60.000",
		      "available": true,
		      "best_seller": true,
		      "categories": [
		        1,
		        4
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    },
		    {
		      "id": 2,
		      "name": "ipsum",
		      "price": "20.000",
		      "available": false,
		      "best_seller": false,
		      "categories": [
		        4
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    },
		    {
		      "id": 3,
		      "name": "dolor",
		      "price": "10.000",
		      "available": true,
		      "best_seller": true,
		      "categories": [
		        4
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    },
		    {
		      "id": 4,
		      "name": "sit",
		      "price": "35.000",
		      "available": false,
		      "best_seller": false,
		      "categories": [
		        1,
		        2
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    },
		    {
		      "id": 5,
		      "name": "amet",
		      "price": "12.000",
		      "available": true,
		      "best_seller": true,
		      "categories": [
		        1,
		        4
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    },
		    {
		      "id": 6,
		      "name": "consectetur",
		      "price": "120.000",
		      "available": true,
		      "best_seller": false,
		      "categories": [
		        1,
		        4
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    },
		    {
		      "id": 7,
		      "name": "adipiscing",
		      "price": "50.000",
		      "available": false,
		      "best_seller": false,
		      "categories": [
		        1,
		        3
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    },
		    {
		      "id": 8,
		      "name": "elit",
		      "price": "2.000",
		      "available": true,
		      "best_seller": false,
		      "categories": [
		        1,
		        3
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    },
		    {
		      "id": 9,
		      "name": "maecenas",
		      "price": "150.000",
		      "available": true,
		      "best_seller": true,
		      "categories": [
		        2,
		        4
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    },
		    {
		      "id": 10,
		      "name": "eu",
		      "price": "200.000",
		      "available": false,
		      "best_seller": true,
		      "categories": [
		        2,
		        3
		      ],
		      "img": "http://lorempixel.com/200/100/food/",
		      "description": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eu."
		    }
		  ]
	}

	var categoria={
		"categories": [
		    {
		      "categori_id": 1,
		      "name": "drinks"
		    },
		    {
		      "categori_id": 2,
		      "name": "lunch"
		    },
		    {
		      "categori_id": 3,
		      "name": "food"
		    },
		    {
		      "categori_id": 4,
		      "name": "sea"
		    }
		  ]
	}


	//eliminar tabla existente
	var Table = document.getElementById("productos"); Table.innerHTML = ""; 
		
    var DatosJson = JSON.parse(JSON.stringify(producto));
    console.log(DatosJson.products.length);
    $("#productos").append('<tr><th>id</th>'+
 	'<th>name</th>' +
 	'<th>price</th>' +
 	'<th>available</th>' +
 	'<th>best_seller</th>' +
 	'<th>categories</th>' + 
 	'<th>img</th>' +
 	'<th>description</th>');

	dataArr=producto;

		var sortArray = dataArr['products'];

		if (orden=='1') {
			sortArray.sort(function(a,b) {
			    if ( a.name < b.name) 
			        return -1;
			    if ( a.name > b.name) 
			        return 1;
			    return 0;
			} );
		}

		if (orden=='2') {
			sortArray.sort(function(a,b) {
			    if ( parseFloat(a.price) > parseFloat(b.price) )
			        return -1;
			    if ( parseFloat(a.price) < parseFloat(b.price) )
			        return 1;
			    return 0;
			} );
		}

		if (orden=='3') {
			sortArray.sort(function(a,b) {
			    if ( parseFloat(a.price) < parseFloat(b.price) )
			        return -1;
			    if ( parseFloat(a.price) > parseFloat(b.price) )
			        return 1;
			    return 0;
			} );
		}

			

		console.log(sortArray);





		 if (orden=='1'||orden=='2'||orden=='3') {

		    for (i = 0; i < DatosJson.products.length; i++){
		 
		 $("#productos").append('<tr>' + 
		 	'<td align="center" style="dislay: block;">' + sortArray[i].id + '</td>'+
		 	'<td align="center" style="dislay: block;">' + sortArray[i].name + '</td>'+
		 	'<td align="center" style="dislay: block;">' + sortArray[i].price + '</td>'+
		 	'<td align="center" style="dislay: block;">' + sortArray[i].available + '</td>'+
		 	'<td align="center" style="dislay: block;">' + sortArray[i].best_seller + '</td>'+
		 	'<td align="center" style="dislay: block;">' + sortArray[i].categories + '</td>'+
		 	'<td align="center" style="dislay: block;">' + sortArray[i].img + '</td>'+
		 	'<td align="center" style="dislay: block;">' + sortArray[i].description + '</td>'+'</tr>');
		    }
		}//fin if

		if (filtro=='2') {

		    for (i = 0; i < DatosJson.products.length; i++){
		    	if (sortArray[i].available==true) {

		 
				 $("#productos").append('<tr>' + 
				 	'<td align="center" style="dislay: block;">' + sortArray[i].id + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].name + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].price + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].available + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].best_seller + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].categories + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].img + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].description + '</td>'+'</tr>');
		 		}


		    }//fin for
		}//fin if

		if (filtro=='2') {

		    for (i = 0; i < DatosJson.products.length; i++){
		    	if (sortArray[i].available==true) {

		 
				 $("#productos").append('<tr>' + 
				 	'<td align="center" style="dislay: block;">' + sortArray[i].id + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].name + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].price + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].available + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].best_seller + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].categories + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].img + '</td>'+
				 	'<td align="center" style="dislay: block;">' + sortArray[i].description + '</td>'+'</tr>');
		 		}


		    }//fin for
		}//fin if

	}
 				




	

	function mostrar(){
		var orden=orden;
		if (document.getElementById('filtro').value!=0) {
			if (document.getElementById('filtro').value==1) {
				document.getElementById('categorias').style.display="block";
				document.getElementById('disponibilidad').style.display="none";
				document.getElementById('precio').style.display="none";
			}
			if (document.getElementById('filtro').value==2) {
				document.getElementById('categorias').style.display="none";
				document.getElementById('disponibilidad').style.display="block";
				document.getElementById('precio').style.display="none";
			}
			if (document.getElementById('filtro').value==3) {
				document.getElementById('categorias').style.display="none";
				document.getElementById('disponibilidad').style.display="none";
				document.getElementById('precio').style.display="block";
			}

		}


	}
</script>

<body onload="cargar('');">
	

	<div class="container">
		<div class="page-header">
			<center><h1><font color="white" face="sans-serif" size="10" >Compras</font></h1></center>
		</div>
		<br>

		
	
		<center>
		<div class="row">
			<div class="col-md-3">	
				<div><font color="white" size="6" >Filtro:</font>
				<select name="filtro" id="filtro" class="col-md-5 form-control">
					<option value="0">Seleccione un filtro</option>
					<option value="1">Categorias</option>
					<option value="2">Disponibilidad</option>
					<option value="3">Precio</option>
				</select>
				</div>
			</div>
			<div class="col-md-4">
				<div><font color="white" size="6" >Ordenar:</font>
				  <select name="ordenar" id="ordenar" class="col-md-5 form-control">
					<option value="0">Seleccione un orden</option>
					<option value="1">Nombre</option>
					<option value="2">Mayor precio</option>
					<option value="3">Menor precio</option>
				</select>
				</div>
			</div>
			<div class="col-md-4">
				<div><font color="white" size="6" >Buscador:</font>
				  <input id="txt_buscar" name="txt_buscar" type="text" class="col-md-5 form-control" placeholder="Buscar producto" autocomplete="off" />
				</div>
			</div>
			<div class="col-md-1">
				
					<div><input type="submit"  name="ok" value="OK" class="btn btn-primary"  onclick="cargar(document.getElementById('ordenar').value,document.getElementById('filtro').value);mostrar();" />	
					</div>
					
			</div>
		</center>
		</div>


		<br>
				
		<center>
		<div class="row">
			<div class="col-md-5">	
					<div><font color="white" style="display: none;" size="4" >Categorias:</font>
					<select name="filtro" id="categorias" style="display: none;" class="col-md-5 form-control">
						<option value="0">Seleccione una opcion</option>
						<option value="1">Categorias</option>
						<option value="2">Disponibilidad</option>
						<option value="3">Precio</option>
					</select>
					</div>
					<div><font color="white" style="display: none;" size="4" >Disponibilidad:</font>
					<select name="filtro" id="disponibilidad" style="display: none;" class="col-md-5 form-control">
						<option value="0">Seleccione una opcion</option>
						<option value="1">Agotados</option>
						<option value="2">Disponibles</option>
						<option value="3">Mas vendidos</option>
					</select>
					</div>
					<div><font color="white" style="display: none;" size="4" >Precio:</font>
					<select name="filtro" id="precio" style="display: none;" class="col-md-5 form-control">
						<option value="0">Seleccione una opcion</option>
						<option value="1">Mas de 30.000</option>
						<option value="2">Menos de 10.000</option>
					</select>
					</div>
			</div>
		</div>
		</center>
		<br>
	


		<div class="row">
			<div class="col-md-8">	
				<div><center><font color="white" size="4" >Productos:</font></center>
					<div class="table-responsive">
					<table border="1" id="productos" class="table">
						
					</table>
					</div>
				</div>
			</div>
			<div class="col-md-4">	
				<div><center><font color="white" size="4" >Carrito:</font></center>
					<div class="table-responsive">
					<table border="1" id="carrito" class="table">
							<tr>
					            <th>Producto</th>
					            <th>Precio</th>
					       
					        </tr>
						
						
					</table>
					</div>
				</div>
			</div>
			
		</div>
	
	
	



	

	<script src="js/jquery-3.4.1.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
</body>

</html>